/*
 * Amplify Core 1.1.0
 * 
 * Copyright 2011 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 * 
 * http://amplifyjs.com
 */
(function(b){var c=[].slice,a={},e=b.amplify={publish:function(g){var i=c.call(arguments,1),b,d,h,e=0,f;if(!a[g])return!0;b=a[g].slice();for(h=b.length;e<h;e++){d=b[e],f=d.callback.apply(d.context,i);if(f===!1)break}return f!==!1},subscribe:function(b,d,c,e){arguments.length===3&&typeof c=="number"&&(e=c,c=d,d=null),arguments.length===2&&(c=d,d=null),e=e||10;for(var g=0,i=b.split(/\s/),k=i.length,h;g<k;g++){b=i[g],h=!1,a[b]||(a[b]=[]);for(var f=a[b].length-1,j={callback:c,context:d,priority:e};f>=0;f--)if(a[b][f].priority<=e){a[b].splice(f+1,0,j),h=!0;break}h||a[b].unshift(j)}return c},unsubscribe:function(b,d){if(!!a[b])for(var e=a[b].length,c=0;c<e;c++)if(a[b][c].callback===d){a[b].splice(c,1);break}}}})(this)